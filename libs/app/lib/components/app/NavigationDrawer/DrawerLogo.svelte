<script lang="ts">
  import { createEventDispatcher } from "svelte";
  import clsx from "clsx";
  import BaseIcon from "../../Icon.svelte";

  /**
   * If the drawer is minified or not.
   * @default false
   */
  export let isMinified = false;

  const dispatch = createEventDispatcher<{ toggle: void }>();
  const toggleMini = () => {
    handleMouseeleave();
    dispatch("toggle");
  };

  let isHovering = false;

  const handleMouseenter = () => {
    isHovering = true;
  };

  const handleMouseeleave = () => {
    isHovering = false;
  };

  const handleLogoCLick = () => {
    console.log("logo clicked");
  };

  $: logoClasses = clsx({
    "mx-auto my-2 w-7": isMinified,
    "m-2": !isMinified,
  });
</script>

<div
  class="relative h-7 flex cursor-pointer {logoClasses}"
  on:click={handleLogoCLick}
  on:mouseenter={handleMouseenter}
  on:mouseleave={handleMouseeleave}
>
  <svg viewBox="0 0 28 28" width="28">
    <defs>
      <linearGradient
        id="linear"
        x1="11"
        y1="-12"
        x2="38"
        y2="6"
        gradientUnits="userSpaceOnUse"
      >
        <stop stop-color="#428CFB" /><stop offset="1" stop-color="#0537DB" />
      </linearGradient>
    </defs>

    <rect width="28" height="28" rx="4" fill="url(#linear)" />
    <path
      d="M19.25 16.625L6.125 23.625L6.125 9.625L19.25 16.625Z"
      fill="white"
    />
    <path
      d="M23.625 8.3125C23.625 10.4871 21.8621 12.25 19.6875 12.25C17.5129 12.25 15.75 10.4871 15.75 8.3125C15.75 6.13788 17.5129 4.375 19.6875 4.375C21.8621 4.375 23.625 6.13788 23.625 8.3125Z"
      fill="#AACBF9"
    />
  </svg>

  {#if !isMinified}
    <svg class="ml-2 h-7" viewBox="0 0 110 19" width="124">
      <g stroke="none" fill="#1B3862">
        <path
          d="M0.0071106 1.19696V18.1667H2.95692V6.48342H3.11436L7.80422 18.1169H10.0083L14.6982 6.50828H14.8556V18.1667H17.8054V1.19696H14.0436L9.00569 13.4934H8.80683L3.76895 1.19696H0.0071106Z"
        />
        <path
          d="M24.6828 18.4235C26.6797 18.4235 27.8729 17.4872 28.4198 16.4183H28.5192V18.1667H31.4027V9.64867C31.4027 6.28455 28.66 5.27367 26.2323 5.27367C23.5559 5.27367 21.501 6.46685 20.8381 8.78692L23.6387 9.18465C23.937 8.31462 24.7822 7.56888 26.2488 7.56888C27.6409 7.56888 28.4032 8.28148 28.4032 9.53266V9.58238C28.4032 10.4441 27.5 10.4856 25.2545 10.7258C22.7853 10.991 20.4238 11.7284 20.4238 14.5954C20.4238 17.0978 22.255 18.4235 24.6828 18.4235ZM25.4617 16.2195C24.2105 16.2195 23.3156 15.6477 23.3156 14.5457C23.3156 13.3939 24.3182 12.9133 25.6605 12.7228C26.4477 12.615 28.022 12.4162 28.4115 12.1013V13.6011C28.4115 15.018 27.268 16.2195 25.4617 16.2195Z"
        />
        <path
          d="M34.4188 18.1667H37.4183V5.43939H34.4188V18.1667ZM35.9269 3.63304C36.8797 3.63304 37.6586 2.90387 37.6586 2.00899C37.6586 1.10581 36.8797 0.376648 35.9269 0.376648C34.9657 0.376648 34.1868 1.10581 34.1868 2.00899C34.1868 2.90387 34.9657 3.63304 35.9269 3.63304Z"
        />
        <path d="M43.5023 1.19696H40.5028V18.1667H43.5023V1.19696Z" />
        <path
          d="M48.9897 1.19696H45.6173L51.5915 18.1667H55.3865L61.369 1.19696H57.9883L53.5801 14.554H53.4061L48.9897 1.19696Z"
        />
        <path
          d="M63.4715 18.1667H66.4711V5.43939H63.4715V18.1667ZM64.9796 3.63304C65.9325 3.63304 66.7114 2.90387 66.7114 2.00899C66.7114 1.10581 65.9325 0.376648 64.9796 0.376648C64.0184 0.376648 63.2395 1.10581 63.2395 2.00899C63.2395 2.90387 64.0184 3.63304 64.9796 3.63304Z"
        />
        <path
          d="M74.2785 18.3904C76.466 18.3904 77.4521 17.0895 77.9244 16.1615H78.1067V18.1667H81.0565V1.19696H78.0487V7.54403H77.9244C77.4686 6.62428 76.5323 5.27367 74.2868 5.27367C71.3453 5.27367 69.0335 7.57717 69.0335 11.8196C69.0335 16.0123 71.279 18.3904 74.2785 18.3904ZM75.1154 15.9294C73.1351 15.9294 72.091 14.1894 72.091 11.803C72.091 9.43323 73.1185 7.7346 75.1154 7.7346C77.0461 7.7346 78.1067 9.3338 78.1067 11.803C78.1067 14.2722 77.0295 15.9294 75.1154 15.9294Z"
        />
        <path
          d="M89.8873 18.4152C92.8536 18.4152 94.892 16.9652 95.4223 14.7528L92.6216 14.438C92.2156 15.5151 91.2213 16.0786 89.9287 16.0786C87.9898 16.0786 86.7054 14.8025 86.6806 12.6233H95.5466V11.7036C95.5466 7.23744 92.8619 5.27367 89.7298 5.27367C86.084 5.27367 83.7059 7.95004 83.7059 11.8776C83.7059 15.8714 86.0508 18.4152 89.8873 18.4152ZM86.6889 10.6016C86.78 8.9775 87.9815 7.61031 89.7713 7.61031C91.4947 7.61031 92.6548 8.86978 92.6713 10.6016H86.6889Z"
        />
        <path
          d="M103.636 18.4152C107.364 18.4152 109.734 15.7886 109.734 11.8527C109.734 7.90861 107.364 5.27367 103.636 5.27367C99.9071 5.27367 97.5373 7.90861 97.5373 11.8527C97.5373 15.7886 99.9071 18.4152 103.636 18.4152ZM103.652 16.0123C101.589 16.0123 100.578 14.1728 100.578 11.8445C100.578 9.51609 101.589 7.65174 103.652 7.65174C105.682 7.65174 106.693 9.51609 106.693 11.8445C106.693 14.1728 105.682 16.0123 103.652 16.0123Z"
        />
      </g>
    </svg>

    <button
      class="absolute -right-2 top-2 w-4 h-4 flex justify-center rounded items-center bg-dark-600 hover:bg-dark-500 text-white shadow-btn"
      on:click|stopPropagation={toggleMini}
    >
      <BaseIcon name="menu" size={3.5} on:click={toggleMini} />
    </button>
  {/if}

  {#if isMinified && isHovering}
    <button
      class="absolute w-7 h-7 flex justify-center rounded items-center bg-dark-600 hover:bg-dark-500 text-white"
      on:click|stopPropagation={toggleMini}
    >
      <BaseIcon name="menu" size={5} on:click={toggleMini} />
    </button>
  {/if}
</div>
